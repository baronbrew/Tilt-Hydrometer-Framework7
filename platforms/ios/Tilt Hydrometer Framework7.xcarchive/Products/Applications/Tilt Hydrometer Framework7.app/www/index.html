<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!--
  Customize this policy to fit your own app's needs. For more guidance, see:
      https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
  Some notes:
      * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
      * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
      * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
          * Enable inline JS: add 'unsafe-inline' to default-src
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#2196f3">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <title>Tilt Hydrometer</title>

  <link rel="stylesheet" href="framework7/css/framework7.min.css">
  <link rel="stylesheet" href="css/icons.css">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>
  <div id="app">
    <!-- Status bar overlay for fullscreen mode-->
    <div class="statusbar"></div>
    <!-- Left panel with cover effect-->
    <div class="panel panel-left panel-reveal theme-light">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="title">Settings</div>
            </div>
          </div>
          <div class="page-content">
              <div class="block-title">Select Tilt Color</div>
              <div class="list">
                  <ul>
                    <div id="settingsPanel"></div>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Right panel with reveal effect-->
    <div class="panel panel-right panel-reveal theme-light">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="title">Files</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">Right panel content goes here</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Your main view, should have "view-main" class -->
    <div class="view view-main ios-edges theme-dark">
      <!-- Page, data-name contains page name which can be used in callbacks -->
      <div class="page  color-theme-gray" data-name="home">
        <!-- Top Navbar -->
        <div class="navbar">
          <div class="navbar-inner bg-color-black">
            <div class="left">
              <a href="#" class="link icon-only panel-open" data-panel="left">
                <i class="icon f7-icons color-gray">gear_fill</i>
              </a>
            </div>
            <div class="title sliding">Tilt Hydrometer</div>
            <div class="right">
              <a href="#" class="link icon-only panel-open" data-panel="right">
                <i class="icon f7-icons color-gray">folder</i>
              </a>
            </div>
          </div>
        </div>
        <!-- Scrollable page content-->
        <div class="page-content">
        <div id="tiltCard" class="tiltCard row no-gap"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- template7 templates -->
  <script id="displaytemplate" type="text/template7">
    {{#each this}}
    <div id="tiltcard-{{Color}}" class="card card-outline elevation-12 col-100 tablet-45">
        <div class="card-content card-content-padding"><p class="no-margin-bottom" id="beerName{{Color}}">{{Beername}}</p><strong>TILT | {{Color}}</strong></div>
        <div id="quicksettings" class="accordion-item">
        <div class="accordion-item-toggle">
        <div <button class="margin-horizontal button button-round" style="background:{{Color}};height:30px;color:{{Color}}">Show options for {{Color}} Tilt.</button></div>
        </div>
        <div class="accordion-item-content">
        <div class="margin-top segmented margin-horizontal">
            <button id="calprompt-{{Color}}" class="button col button-round"><i class="material-icons">adjust</i>CAL</button>
            <button class="button col button-round"><i class="material-icons">show_chart</i>LOG</button>
            <button id="unitstoggle-{{Color}}" class="button col button-round"><i class="material-icons">straighten</i>UNITS</button>
          </div>
        </div>
        </div>
        <div class="card-content card-content-padding">SG/Concentration: <span id="uncaldisplayFerm+displayFermunits{{Color}}">{{uncaldisplayFerm}}</span> (uncal.)</div>
        <div id="caldisplayFerm+displayFermunits{{Color}}" class="card-content card-content-padding no-padding-top sg-temp">{{caldisplayFerm}}</div>
        <div id="percentScaleSG{{Color}}" class="margin-horizontal button button-round" style="background:{{Color}};height:10px;max-width:95%;"></div>
        <div class="card-content card-content-padding">Temperature: {{uncalTemp}} (uncal.)</div>
        <div id="uncaldisplayTemp+displayTempunits{{Color}}" class="card-content card-content-padding no-padding-top sg-temp">{{uncalTemp}}{{displayTempunits}}</div>
        <div id="percentScaleTemp{{Color}}" class="margin-horizontal button button-round" style="background:{{Color}};height:10px;max-width:95%;"></div>
        <div class="card-content card-content-padding lastrec">Received <span id=numberSecondsAgo{{Color}}></span> seconds ago <span id=displayRSSI{{Color}}></span><br><span id=displaytimeStamp{{Color}}></span></div>
    </div>
    {{/each}}
      
  </script>

  <script id="sgcallisttemplate" type="text/template7">
    {{#each SGcalpoints}}
    <tr>
        <td class="checkbox-cell">
          <label class="checkbox">
            <input type="checkbox" id="sgcalpoints-{{color}}-{{@index}}" onchange="deleteSGCalPoint(this)">
            <i class="icon icon-checkbox"></i>
          </label>
        </td>
        <td class="numeric-cell">{{uncalpoint}}</td>
        <td class="numeric-cell">{{actualpoint}}</td>
    </tr>
    {{/each}}
  </script>

  <script id="settingstemplate" type="text/template7">
  {{#each this}}
  <li class="accordion-item" id="accordion-{{Color}}">
      <div class="accordion-item-toggle">
        <div class="item-title margin-horizontal padding"><i class="f7-icons color-custom-{{Color}}">chevron_down</i> {{Color}}</div>
      </div>
    <div class="accordion-item-content">
      <div class="block-title no-margin-top"><i class="icon material-icons color-custom-{{Color}}">local_drink</i> Beer Name</div>
      <div class="block block-strong">
          <div class="content-block">
          <div class="content-block-inner">
            <div class="chip">
          <div class="chip-media bg-color-black text-color-white"><i class="icon material-icons">smartphone</i></div>
          <div class="chip-label" id="currentbeername-{{Color}}">Untitled</div>
          </div>
          <div class="item-title floating-label margin-top">Enter beer name:</div>
          <div class="item-input-wrap">
          <input type="text" id="beername-{{Color}}" placeholder="IPA">
          </div>
          <p class="segmented segmented-raised segmented-round" >
              <button class="button button-round" id="setBeerName-{{Color}}" onclick="setBeerName(this)">Set Name</button>
              <button class="button button-round button-active" id="clearBeerName-{{Color}}" onclick="clearBeerName(this)">Clear Name</button>
          </p>
          </div>
      </div>
      </div>
      <div class="block-title"><i class="icon material-icons color-custom-{{Color}}">cloud_upload</i> Cloud Logging</div>
    <div class="block block-strong">
      <div class="content-block">
      <div class="content-block-inner">
          <div class="item-title floating-label">Enter email for logging: <i class="f7-icons color-custom-gray">info</i></div>
          <div class="item-input">
          <input type="email" id="emailAddress-{{Color}}" placeholder="example@gmail.com">
          </div>
          <p class="segmented segmented-raised segmented-round" >
              <button class="button button-round" id="setEmail-{{Color}}" onclick="setEmail(this)">Save Email</button>
              <button class="button button-round button-active" id="clearEmail-{{Color}}" onclick="clearEmail(this)">Delete Email</button>
          </p>
          <p>
              <button class="button button-round" id="startCloudLog-{{Color}}" onclick="startCloudLogging(this)">Start New Cloud Log</button>
            </p>
            <p>Cloud Status:</p>
            <div class="card"><div class="card-content card-content-padding" id="cloudStatus-{{Color}}">Tap "Start New Cloud Log" to start logging data to the cloud for {{Color}} Tilt.</div></div>
            </div>
            <p class="segmented segmented-raised segmented-round">
                <button class="button button-round" id="logOnce-{{Color}}" onclick="logOnce(this)">Log Once</button>
                <button class="button button-round button-active" id="endLog-{{Color}}" onclick="endLog(this)">End Log</button>
              </p>
          <p class="no-margin-top"><label class="toggle" id="toggleDefaultCloudURL-{{Color}}">
              <input type="checkbox" unchecked>
              <span class="toggle-icon"></span>
              </label><a onclick="defaultToggle('{{Color}}')"> Use default cloud URL</a></p>
              <div class="item-title floating-label">Enter New Default Cloud URL: <i class="f7-icons color-custom-gray">info</i></div>
              <div class="item-input">
              <input type="text" id="defaultCloudURL-{{Color}}" placeholder="(optional)">
              </div>
                </div>
          <div class="accordion-item">
          <div class="accordion-item-toggle"><button class="button button-round">Log to additional URLs...</button></div>
          <div class="accordion-item-content">
          <p><label class="toggle" id="toggleCustomCloudURL1-{{Color}}">
              <input type="checkbox" unchecked>
              <span class="toggle-icon"></span>
              </label><a onclick="custom1Toggle('{{Color}}')"> Use Custom Cloud URL 1</a></p>
      <div class="item-title floating-label">Enter Custom Cloud URL 1: <i class="f7-icons color-custom-gray">info</i></div>
      <div class="item-input">
      <input type="text" id="customCloudURL1-{{Color}}" placeholder="https://...">
      </div>
      <p><label class="toggle" id="toggleCustomCloudURL2-{{Color}}">
          <input type="checkbox" unchecked>
          <span class="toggle-icon"></span>
          </label><a onclick="custom2Toggle('{{Color}}')"> Use Custom Cloud URL 2</a></p>
  <div class="item-title floating-label">Enter Custom Cloud URL 2: <i class="f7-icons color-custom-gray">info</i></div>
  <div class="item-input">
  <input type="text" id="customCloudURL2-{{Color}}" placeholder="https://...">
  </div>
  </div>
  <p>Set cloud logging interval:
  <div class="stepper stepper-big padding-horizontal" id="cloudStepper-{{Color}}">
      <div class="stepper-button-minus"><small>-</small></div>
      <div class="stepper-input-wrap">
        <input type="text" readonly value="15" min="15" max="1440" step="15">
      </div>
      <div class="stepper-button-plus"><small>+</small></div>
  </div>minutes
  </p>
  </div>
  </div>
          <div class="block-title">Calibration (Gravity)</div>
          <div class="block block-strong">
            <div class="content-block">
            <div class="content-block-inner">
              <p class="no-margin-top">With Water:</p>
                <p class="round no-margin-top">
                    <button class="button button-round" id="tareinwater-{{Color}}-1.000" onclick="addSGPoints(this)">Calibrate in Water</button>
                </p>
                <p>With Known Gravity:</p>
          <div class="item-title floating-label">Enter uncalibrated (Tilt) point:</div>
          <div class="item-input-wrap">
          <input type="number" id="uncalSG-{{Color}}" placeholder="1.002">
          </div>
          <p class="round">
              <button class="button button-round" id="getuncalibratedSGpoint-{{Color}}" onclick="getUncalibratedSGPoint(this)">Get Current Gravity</button>
          </p>
          <div class="item-title floating-label">Enter actual (known) point:</div>
          <div class="item-input-wrap">
          <input type="number" id="actualSG-{{Color}}" placeholder="1.000">
          </div>
          <p class="round">
              <button class="button button-round" id="addSGpoint-{{Color}}" onclick="addSGPoints(this)">Calibrate in Known Gravity</button>
            </p>
            <div class="data-table">
                <table>
                    <thead>
                      <tr>
                          <th class="numeric-cell">Delete</th>
                        <th class="numeric-cell">Uncal/Tilt</th>
                        <th class="numeric-cell">Actual</th>
                      </tr>
                    </thead>
                    <tbody id="sgcallisttemplate-{{Color}}">
                    </tbody>
                 </table>
             </div>
</li>
{{/each}}
</script>

  <!-- Cordova -->
  <script type="text/javascript" src="cordova.js"></script>

  <!-- Framework7 library -->
  <script type="text/javascript" src="framework7/js/framework7.min.js"></script>

  <!-- App routes -->
  <script type="text/javascript" src="js/routes.js"></script>

  <!-- Your custom app scripts -->
  <script type="text/javascript" src="js/app.js"></script>
</body>
</html>
